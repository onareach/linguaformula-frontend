@import "tailwindcss";

@theme {
  --font-family-sans: 'Inter', sans-serif;
}

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

html {
  min-width: 360px;
  scrollbar-gutter: stable;
}

body {
  background: var(--background);
  color: var(--foreground);
  text-rendering: optimizeLegibility;
}

/* Accessibility: visible focus for keyboard users only (no change for mouse) – olive to match buttons */
*:focus-visible {
  outline: 2px solid #6b7c3d;
  outline-offset: 2px;
  border-radius: 2px;
}

/* Faint olive background for autofilled inputs (override browser default blue) */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px #e8ebdf inset;
  box-shadow: 0 0 0 30px #e8ebdf inset;
}

@media (prefers-color-scheme: dark) {
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px rgba(107, 124, 61, 0.2) inset;
    box-shadow: 0 0 0 30px rgba(107, 124, 61, 0.2) inset;
  }
}

/* Screen-reader only: hide visually, keep for assistive tech */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

h1,
h2,
h3,
h4 {
  text-wrap: balance;
  font-weight: inherit;
}

/* Sign-in / Account page text – revert reference:
   Font size: default (1rem), use text-base if explicit.
   Color: default foreground (--foreground), i.e. text-gray-900 dark:text-zinc-200 or inherit from body.
*/

/* Navigation styles */
.text-copy {
  color: rgb(75 85 99); /* gray-600 */
}

.text-nav {
  color: rgb(107 114 128); /* gray-500 */
}

.text-nav-hover:hover {
  color: rgb(75 85 99); /* gray-600 */
}

@media (prefers-color-scheme: dark) {
  .text-copy {
    color: rgb(209 213 219); /* gray-300 */
  }
  
  .text-nav {
    color: rgb(156 163 175); /* gray-400 */
  }
  
  .text-nav-hover:hover {
    color: rgb(209 213 219); /* gray-300 */
  }
}

/* Loading spinner – matches site palette (nav/copy grays) */
.spinner {
  width: 36px;
  height: 36px;
  border: 2px solid rgb(229 231 235); /* gray-200 */
  border-top-color: rgb(107 114 128); /* gray-500, .text-nav */
  border-radius: 50%;
  animation: spin 0.9s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@media (prefers-color-scheme: dark) {
  .spinner {
    border-color: rgb(63 63 70); /* zinc-700 */
    border-top-color: rgb(161 161 170); /* zinc-400, nav in dark */
  }
}

/* Bouncing dots – matches site palette */
.bouncing-dots {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.bouncing-dots span {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgb(107 114 128); /* gray-500 */
  animation: bounce-dot 0.6s ease-in-out infinite both;
}

.bouncing-dots span:nth-child(2) {
  animation-delay: 0.1s;
}

.bouncing-dots span:nth-child(3) {
  animation-delay: 0.2s;
}

@keyframes bounce-dot {
  0%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-6px);
  }
}

@media (prefers-color-scheme: dark) {
  .bouncing-dots span {
    background: rgb(161 161 170); /* zinc-400 */
  }
}

/* Formulas page filter – olive theme */
.formulas-filter input[type="checkbox"] {
  accent-color: #6b7c3d;
}

.formulas-filter-clear {
  padding: 6px 12px;
  font-size: 14px;
  background-color: #6b7c3d;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.formulas-filter-clear:hover {
  background-color: #7a8f4a;
}

/* High contrast mode – enhances color contrast of text, buttons, etc. */
html.high-contrast {
  --hc-text: #000000;
  --hc-text-muted: #1a1a1a;
  --hc-bg: #ffffff;
  --hc-border: #000000;
  --hc-link: #0d47a1;
  --hc-button-bg: #1b5e20;
  --hc-button-hover: #2e7d32;
}

@media (prefers-color-scheme: dark) {
  html.high-contrast {
    --hc-text: #ffffff;
    --hc-text-muted: #e0e0e0;
    --hc-bg: #0a0a0a;
    --hc-border: #ffffff;
    --hc-link: #64b5f6;
    --hc-button-bg: #2e7d32;
    --hc-button-hover: #43a047;
  }
}

html.high-contrast body,
html.high-contrast [class*="min-h-screen"] {
  color: var(--hc-text) !important;
  background-color: var(--hc-bg) !important;
}

html.high-contrast a,
html.high-contrast [class*="6b7c3d"],
html.high-contrast button.text-nav {
  text-decoration: underline !important;
}

html.high-contrast a:hover {
  text-decoration-thickness: 2px !important;
}

/* Nav links and sign out: same muted color as other nav text */
html.high-contrast a.text-nav,
html.high-contrast a.text-copy,
html.high-contrast button.text-nav {
  color: var(--hc-text-muted) !important;
}

/* Other links: blue for visibility */
html.high-contrast a:not(.text-nav):not(.text-copy):not([class*="6b7c3d"]) {
  color: var(--hc-link) !important;
}

/* Formula links and other olive-styled links: dark olive green (matches checkbox filter) */
html.high-contrast a[class*="6b7c3d"] {
  color: #556b2f !important;
}

html.high-contrast .text-nav,
html.high-contrast .text-copy {
  color: var(--hc-text-muted) !important;
}

html.high-contrast input,
html.high-contrast select,
html.high-contrast textarea {
  border-color: var(--hc-border) !important;
  color: var(--hc-text) !important;
  background-color: var(--hc-bg) !important;
}

html.high-contrast button {
  border-color: var(--hc-border) !important;
}

html.high-contrast .formulas-filter-clear,
html.high-contrast button[class*="6b7c3d"] {
  background-color: var(--hc-button-bg) !important;
  color: #ffffff !important;
  border: 2px solid var(--hc-border) !important;
}

html.high-contrast .formulas-filter-clear:hover,
html.high-contrast button[class*="6b7c3d"]:hover {
  background-color: var(--hc-button-hover) !important;
}
